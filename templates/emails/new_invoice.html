{% extends "emails/base.html" %}

{% block content %}
<h1>Nouvelle Facture ðŸ“„</h1>

<p>Bonjour <strong>{{ client_name }}</strong>,</p>

<p>Une nouvelle facture a Ã©tÃ© Ã©mise pour votre projet <strong>{{ project_name }}</strong>.</p>

<div class="highlight">
    <h3 style="margin-top: 0; color: #FF5722;">Facture NÂ° {{ invoice_number }}</h3>
    <p><strong>Objet:</strong> {{ subject }}</p>
</div>

<div style="background-color: #f9f9f9; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <h4 style="margin-top: 0;">DÃ©tails de la facture</h4>
    
    {% if items %}
    <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px;">
        <thead>
            <tr style="background-color: #eee;">
                <th style="padding: 8px; text-align: left;">Description</th>
                <th style="padding: 8px; text-align: right;">QtÃ©</th>
                <th style="padding: 8px; text-align: right;">Prix Unit.</th>
                <th style="padding: 8px; text-align: right;">Total</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 8px;">{{ item.description|truncatewords:10 }}</td>
                <td style="padding: 8px; text-align: right;">{{ item.quantity }}</td>
                <td style="padding: 8px; text-align: right;">{{ item.unit_price|floatformat:0 }} FCFA</td>
                <td style="padding: 8px; text-align: right;">{{ item.total_price|floatformat:0 }} FCFA</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
    
    <div class="info-row">
        <span class="info-label">Sous-total HT:</span>
        <span class="info-value">{{ subtotal|floatformat:0 }} FCFA</span>
    </div>
    <div class="info-row">
        <span class="info-label">TVA:</span>
        <span class="info-value">{{ tax_amount|floatformat:0 }} FCFA</span>
    </div>
    <div class="info-row">
        <span class="info-label">Total TTC:</span>
        <span class="info-value">{{ total_ttc|floatformat:0 }} FCFA</span>
    </div>
    {% if advance_payment %}
    <div class="info-row">
        <span class="info-label">Acompte versÃ©:</span>
        <span class="info-value">- {{ advance_payment|floatformat:0 }} FCFA</span>
    </div>
    {% endif %}
    <div class="info-row" style="background-color: #FFF3E0; margin: 10px -15px -15px; padding: 15px; border-radius: 0 0 5px 5px;">
        <span class="info-label" style="font-size: 18px;">Net Ã  payer:</span>
        <span class="info-value" style="font-size: 18px; color: #FF5722;">{{ net_to_pay|floatformat:0 }} FCFA</span>
    </div>
</div>

<p><strong>ðŸ“… Date d'Ã©chÃ©ance:</strong> {{ due_date|date:"d/m/Y" }}</p>

<p>Vous pouvez consulter et tÃ©lÃ©charger votre facture depuis l'application.</p>

<p style="text-align: center;">
    <a href="#" class="button">Voir la facture</a>
</p>

<p>Pour tout renseignement, n'hÃ©sitez pas Ã  nous contacter.</p>

<p>Cordialement,<br>
<strong>L'Ã©quipe Belle House</strong></p>
{% endblock %}
